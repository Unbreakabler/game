{"version":3,"file":"achievable.js","sources":["../../../../../src/gamelogic/village/achievable.ts"],"sourcesContent":["import { Exclude, Expose } from \"class-transformer\";\nimport type { FARM_JOB } from \"./farmjobs\";\n\nexport interface Requirement {\n  achievable_name: string;\n  level_required: number;\n}\n\nexport type ValidAchievableShortName = FARM_JOB;\n\n/**\n * Achievables would be Jobs, Skills, Talents that have or are\n * a requirement before being unlocked\n **/\n@Exclude()\nexport abstract class Achievable {\n  @Expose() public short_name: ValidAchievableShortName;\n  @Expose() public level: number = 0;\n  //TODO: what  do we want to track to help with achievments??\n  //  money earned? etc.\n  // do we need to track per prestige level reset\n  //public amount_earned: number = 0;\n  public requirements: Requirement[] = [];\n\n  protected constructor(short_name: ValidAchievableShortName, requirements: Requirement[] = [], level: number = 0) {\n    this.short_name = short_name;\n    this.requirements = requirements;\n    this.level = level;\n  }\n\n  /**\n   * Returns name in the form classname_shortname lowercase\n   */\n  public getAchievableName(): string {\n    return `${this.constructor.name}_${this.short_name}`.toLocaleLowerCase();\n  }\n\n  public abstract getDisplayName(): string;\n\n  public isAcquired(): boolean {\n    return this.level >= 1;\n  }\n  public areRequirementsMet(global_achievables: Map<string, Achievable>): boolean {\n    for (const requirement of this.requirements) {\n      const a = global_achievables.get(requirement.achievable_name);\n      if (!a) throw new Error(`Missing achievable ${requirement.achievable_name}`);\n      if (!a.isAcquired()) return false;\n      if (a.level < requirement.level_required) return false;\n    }\n    return true;\n  }\n}\n"],"names":[],"mappings":";;;;AAUA;;;;IAKsB,UAAU,GAAhC,MAAsB,UAAU;IAS9B,YAAsB,UAAoC,EAAE,eAA8B,EAAE,EAAE,QAAgB,CAAC;QAP9F,UAAK,GAAW,CAAC,CAAC;;;;;QAK5B,iBAAY,GAAkB,EAAE,CAAC;QAGtC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;;;;IAKM,iBAAiB;QACtB,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,iBAAiB,EAAE,CAAC;KAC1E;IAIM,UAAU;QACf,OAAO,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;KACxB;IACM,kBAAkB,CAAC,kBAA2C;QACnE,KAAK,MAAM,WAAW,IAAI,IAAI,CAAC,YAAY,EAAE;YAC3C,MAAM,CAAC,GAAG,kBAAkB,CAAC,GAAG,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;YAC9D,IAAI,CAAC,CAAC;gBAAE,MAAM,IAAI,KAAK,CAAC,sBAAsB,WAAW,CAAC,eAAe,EAAE,CAAC,CAAC;YAC7E,IAAI,CAAC,CAAC,CAAC,UAAU,EAAE;gBAAE,OAAO,KAAK,CAAC;YAClC,IAAI,CAAC,CAAC,KAAK,GAAG,WAAW,CAAC,cAAc;gBAAE,OAAO,KAAK,CAAC;SACxD;QACD,OAAO,IAAI,CAAC;KACb;EACF;AAnCW;IAAT,MAAM,EAAE;8CAA6C;AAC5C;IAAT,MAAM,EAAE;yCAA0B;AAFf,UAAU;IAD/B,OAAO,EAAE;GACY,UAAU,CAoC/B;;;;"}