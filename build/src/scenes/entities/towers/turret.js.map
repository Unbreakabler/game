{"version":3,"file":"turret.js","sources":["../../../../../../src/scenes/entities/towers/turret.ts"],"sourcesContent":["import type TD from \"../../td\";\nimport Bullet from \"../tower_bullet\";\nimport type Enemy from \"../enemies/enemy\";\nimport { gameModel, GameModel } from \"../../../gamelogic/gamemodel\";\nimport type { TowerInfo } from \"../../../gamelogic/td/tower_defense\";\n\nconst DEFAULT_RANGE = 200;\nconst DEFAULT_ATTACK_SPEED = 1000;\nconst DEFAULT_DAMAGE = 50;\nconst PLACEABLE_MIN_DISTANCE_FROM_PATH = 25;\n\nexport default class Turret extends Phaser.GameObjects.Image {\n  public range = DEFAULT_RANGE;\n  public attack_speed = DEFAULT_ATTACK_SPEED;\n  public damage = DEFAULT_DAMAGE;\n  public is_selected = false;\n  public show_range = false;\n  public is_placed = false;\n  public tower_id: string;\n  \n  private projectiles: BetterGroup<Bullet>;\n  public display_range:  Phaser.GameObjects.Arc;\n  private td_scene: TD;\n  private next_tick = 0;\n  private tower_info!: TowerInfo | undefined;\n\n  public constructor(\n    td_scene: TD,\n    tower_id: string,\n    x: number = 0,\n    y: number = 0,\n    sprite_name: string = \"turret\",\n  ) {\n    super(td_scene, x, y, sprite_name);\n    this.td_scene = td_scene;\n    this.tower_id = tower_id;\n    // TODO(jon): Projectiles will have to be managed different to allow differently projectiles for each turret.\n    this.projectiles = this.td_scene.add.group({ classType: Bullet, active: true, runChildUpdate: true }) as BetterGroup<Bullet>;\n    this.display_range = this.td_scene.add.circle(0, 0, this.range, 0xff0000, 0.5);\n    this.display_range.setVisible(false);\n    this.setupTowerSubscription(tower_id)\n  }\n\n  private setupTowerSubscription(tower_id: string) {\n    const unsubscribe_store = gameModel.subscribe((model) => {\n      this.tower_info = model.tower_defense.getTower(tower_id)\n  \n      if (this.tower_info) {\n        if (this.range !== this.tower_info.range) {\n          this.range = this.tower_info.range\n          this.display_range.setRadius(this.range)\n        }\n        if (this.attack_speed !== this.tower_info.attack_speed) {\n          this.attack_speed = this.tower_info.attack_speed\n        }\n        if (this.damage !== this.tower_info.damage) {\n          this.damage = this.tower_info.damage\n        }\n        if (this.is_selected !== this.tower_info.is_selected) {\n          this.is_selected = this.tower_info.is_selected\n        }\n        if (this.is_placed !== this.tower_info.is_placed) {\n          this.is_placed = this.tower_info.is_placed;\n        }\n      }\n    })\n    this.td_scene.events.on(\"destroy\", function () {\n      unsubscribe_store();\n    });\n  }\n\n  public preUpdate() { this.displayRange() }\n\n  public update(time: number, delta: number): void {\n    if (!this.is_placed) return;\n\n    //Look at near enemies\n    const e = this.findClosestEnemyInRange(20);\n\n    if (e) {\n      this.targetEnemy(e);\n    } else {\n      this.angle = 90;\n    }\n    // time to shoot\n    if (time > this.next_tick) {\n      //If fired at enemy, start cooldown\n      if (this.attemptToFire()) this.next_tick = time + this.attack_speed;\n    }\n  }\n\n  public preDestroy() {\n    if (this.tower_info) {\n      this.tower_info.is_selected = false;\n      this.tower_info.is_placed = false;\n    }\n    this.displayRange();\n  }\n\n  private isPlaceable(\n    place_x: number,\n    place_y: number,\n  ): boolean {\n    const min_dist = this.td_scene.path.getPoints(this.td_scene.path.getLength() / 20).reduce((acc, point) => {\n      return Math.min(Phaser.Math.Distance.Between(place_x, place_y, point.x, point.y), acc);\n    }, 1000);\n    if (min_dist < PLACEABLE_MIN_DISTANCE_FROM_PATH) {\n      // console.error('Can not place turret next to path')\n      return false;\n    }\n\n    for (const t of this.td_scene.tower_map.values()) {\n      if (t == this.td_scene.selected_turret) continue; // current turret on cursor\n\n      const min_x = t.x - t.width/2\n      const max_x = t.x + t.width/2\n      const min_y = t.y - t.height/2\n      const max_y = t.y + t.height/2\n  \n      const new_min_x = place_x - this.width/2\n      const new_max_x = place_x + this.width/2\n      const new_min_y = place_y - this.height/2\n      const new_max_y = place_y + this.height/2\n  \n      const x_overlap = Math.max(0, Math.min(max_x, new_max_x) - Math.max(min_x, new_min_x));\n      const y_overlap = Math.max(0, Math.min(max_y, new_max_y) - Math.max(min_y, new_min_y));\n\n      if (x_overlap * y_overlap > 0) {\n        // console.error('Can not place a turret overlapping another turret')\n        return false;\n      }\n    }\n    return true;\n  }\n\n  public place(place_x: number, place_y: number): boolean {\n    if (!this.isPlaceable(place_x, place_y)) {\n      console.error(`Error placing turret @ x:${place_x}, y:${place_y}`);\n      return false;\n    }\n    this.x = place_x;\n    this.y = place_y;\n    this.setActive(true);\n    this.setVisible(true);\n    this.setInteractive();\n    console.log(`placing turret @ x:${place_x}, y:${place_y}`);\n    this.is_placed = true;\n    if (this.tower_info) {\n      this.tower_info.is_selected = false;\n      this.tower_info.is_placed = true;\n    }\n    this.select(false);\n    this.enableBulletCollisions();\n    return true;\n  }\n\n  public displayRange() {\n    const red = 0xff0000\n    const green = 0x00ff00\n    const blue = 0x0000ff\n    this.display_range.x = this.x;\n    this.display_range.y = this.y;\n    if (this.is_selected) {\n      this.display_range.setVisible(true);\n      if (!this.is_placed) {\n        if (this.isPlaceable(this.x, this.y)) {\n          this.display_range.setFillStyle(green, 0.3);\n        } else {\n          this.display_range.setFillStyle(red, 0.3);\n        }\n      } else {\n        this.display_range.setFillStyle(blue, 0.3);\n      }\n    } else {\n      this.display_range.setVisible(false);\n    }\n  }\n\n  public attemptToFire(): boolean {\n    //Enemy Found\n    const e = this.findClosestEnemyInRange();\n    if (e) {\n      //Add bullet\n      this.fireBullet(this.x, this.y, this.getAngleToEnemy(e));\n      //Update where turret is pointing\n      this.targetEnemy(e);\n      return true;\n    }\n    return false;\n  }\n\n  private findClosestEnemyInRange(range_bonus: number = 0): Enemy | undefined {\n    const enemies = this.td_scene.enemies;\n    let closest_enemy: Enemy | undefined;\n    let closest_distance = Number.MAX_VALUE;\n    for (const e of enemies.getChildren()) {\n      const d = Phaser.Math.Distance.Between(this.x, this.y, e.x, e.y);\n      if (d < this.range + range_bonus) {\n        if (d < closest_distance) {\n          closest_distance = d;\n          closest_enemy = e;\n        }\n      }\n    }\n    return closest_enemy;\n  }\n\n  private getAngleToEnemy(enemy: Enemy): number {\n    return Phaser.Math.Angle.Between(this.x, this.y, enemy.x, enemy.y);\n  }\n\n  private targetEnemy(enemy: Enemy): void {\n    this.rotation = this.getAngleToEnemy(enemy) + Math.PI / 2;\n  }\n\n  public fireBullet(x: number, y: number, angle: number): void {\n    const b = this.projectiles.get();\n    //TODO - Make bullets smart so they follow units and delete selves when enemy is dead\n    b.fire(this.tower_id, x, y, angle, this.range, this.damage);\n  }\n\n  public enableBulletCollisions(): void {\n    this.scene.physics.add.overlap(this.td_scene.enemies, this.projectiles, this.td_scene.damageEnemy as ArcadePhysicsCallback);\n  }\n\n  public select(is_selected = true): void {\n    if (this.tower_info) {\n      this.tower_info.is_selected = is_selected;\n    }\n  }\n}"],"names":[],"mappings":"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"}