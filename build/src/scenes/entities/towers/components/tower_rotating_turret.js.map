{"version":3,"file":"tower_rotating_turret.js","sources":["../../../../../../../src/scenes/entities/towers/components/tower_rotating_turret.ts"],"sourcesContent":["import type { TowerType } from \"../../../../gamelogic/td/tower_defense\";\nimport type TD from \"../../../td\";\nimport type Tower from \"../tower\";\nimport type { TowerComponent } from \"./component_interface\";\n\nexport default (\n  turret_type: TowerType = 'basic') => {\n  const tower_component: TowerComponent = {\n    type: 'rotating_turret',\n    onInit: (parent: Tower, td_scene: TD, x: number, y: number) => {\n      // Setup sprites\n      if (!parent.rotating_sprites) {\n        parent.rotating_sprites = new Phaser.GameObjects.Container(td_scene, x, y);\n        parent.rotating_sprites.name = `${parent.tower_id}_rotating_sprites` // randomly generate this name?\n        parent.rotating_sprites.depth = 1;\n        parent.rotating_sprites.scale = 0.5;\n        td_scene.add.existing(parent.rotating_sprites);\n      }\n\n      const turret = new Phaser.GameObjects.Sprite(td_scene, 0, 0, turret_type);\n      parent.rotating_sprites.add(turret); \n  \n    },\n    onUpdate: (parent: Tower, time: number, delta: number) => {\n      if (!parent.active) return\n\n      if (parent.target && parent.rotating_sprites ) {\n        parent.rotating_sprites.rotation = Phaser.Math.Angle.Between(parent.x, parent.y, parent.target.x, parent.target.y) + Math.PI / 2; \n      }\n    }\n  }\n  return tower_component;\n}"],"names":[],"mappings":"AAKA,sBAAe,CACb,cAAyB,OAAO;IAChC,MAAM,eAAe,GAAmB;QACtC,IAAI,EAAE,iBAAiB;QACvB,MAAM,EAAE,CAAC,MAAa,EAAE,QAAY,EAAE,CAAS,EAAE,CAAS;;YAExD,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE;gBAC5B,MAAM,CAAC,gBAAgB,GAAG,IAAI,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC3E,MAAM,CAAC,gBAAgB,CAAC,IAAI,GAAG,GAAG,MAAM,CAAC,QAAQ,mBAAmB,CAAA;gBACpE,MAAM,CAAC,gBAAgB,CAAC,KAAK,GAAG,CAAC,CAAC;gBAClC,MAAM,CAAC,gBAAgB,CAAC,KAAK,GAAG,GAAG,CAAC;gBACpC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;aAChD;YAED,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;YAC1E,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;SAErC;QACD,QAAQ,EAAE,CAAC,MAAa,EAAE,IAAY,EAAE,KAAa;YACnD,IAAI,CAAC,MAAM,CAAC,MAAM;gBAAE,OAAM;YAE1B,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,gBAAgB,EAAG;gBAC7C,MAAM,CAAC,gBAAgB,CAAC,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;aAClI;SACF;KACF,CAAA;IACD,OAAO,eAAe,CAAC;AACzB,CAAC;;;;"}