{"version":3,"file":"villagebuilding.js","sources":["../../../../../src/gamelogic/village/villagebuilding.ts"],"sourcesContent":["import { Expose } from \"class-transformer\";\nimport type { Wallet } from \"../gamemodel\";\nimport { formatNumber } from \"../util/utils\";\nimport { Achievable } from \"./achievable\";\nimport type { Upgrade, VILLAGE_BUILDING } from \"./villagebuildings\";\n\nexport class VillageBuilding extends Achievable {\n  public display_name: string;\n  public description: string;\n  public upgrades: Upgrade[];\n\n  @Expose()\n  public active: boolean = false;\n  @Expose()\n  public current_build_time: number = 0;\n  @Expose()\n  public is_upgrading: boolean = false;\n\n  public constructor(short_name: VILLAGE_BUILDING, upgrades: Upgrade[], display_name: string, description: string) {\n    super(short_name);\n    this.upgrades = upgrades;\n    this.display_name = display_name;\n    this.description = description;\n  }\n\n  public getDisplayName(): string {\n    return this.display_name;\n  }\n\n  public upgrade(wallet: Wallet): boolean {\n    const next_upgrade = this.getNextUpgrade();\n    if (!next_upgrade) return false;\n    if (wallet.money >= next_upgrade.money_cost) {\n      wallet.money -= next_upgrade.money_cost;\n      this.level++;\n      return true;\n    }\n    return false;\n  }\n\n  public getNextUpgrade(): Upgrade | undefined {\n    if (this.level > this.upgrades.length) return undefined;\n    return this.upgrades[this.level];\n  }\n\n  public getUpgradeMoneyCostAsString(): string {\n    const next_upgrade = this.getNextUpgrade();\n    if (!next_upgrade) return \"Max Level Reached.\";\n    return formatNumber(next_upgrade.money_cost, 0);\n  }\n}\n"],"names":[],"mappings":";;;;;MAMa,eAAgB,SAAQ,UAAU;IAY7C,YAAmB,UAA4B,EAAE,QAAmB,EAAE,YAAoB,EAAE,WAAmB;QAC7G,KAAK,CAAC,UAAU,CAAC,CAAC;QAPb,WAAM,GAAY,KAAK,CAAC;QAExB,uBAAkB,GAAW,CAAC,CAAC;QAE/B,iBAAY,GAAY,KAAK,CAAC;QAInC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;KAChC;IAEM,cAAc;QACnB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC1B;IAEM,OAAO,CAAC,MAAc;QAC3B,MAAM,YAAY,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QAC3C,IAAI,CAAC,YAAY;YAAE,OAAO,KAAK,CAAC;QAChC,IAAI,MAAM,CAAC,KAAK,IAAI,YAAY,CAAC,UAAU,EAAE;YAC3C,MAAM,CAAC,KAAK,IAAI,YAAY,CAAC,UAAU,CAAC;YACxC,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;KACd;IAEM,cAAc;QACnB,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM;YAAE,OAAO,SAAS,CAAC;QACxD,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAClC;IAEM,2BAA2B;QAChC,MAAM,YAAY,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QAC3C,IAAI,CAAC,YAAY;YAAE,OAAO,oBAAoB,CAAC;QAC/C,OAAO,YAAY,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;KACjD;CACF;AAtCC;IADC,MAAM,EAAE;+CACsB;AAE/B;IADC,MAAM,EAAE;2DAC6B;AAEtC;IADC,MAAM,EAAE;qDAC4B;;;;"}