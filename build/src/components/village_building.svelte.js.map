{"version":3,"file":"village_building.svelte.js","sources":["../../../../src/components/village_building.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import Card from \"smelte/src/components/Card\";\n  import Button from \"smelte/src/components/Button\";\n  import type { VillageBuilding } from \"../gamelogic/village/villagebuilding\";\n  import { loop_guard } from \"svelte/internal\";\n  import { gameModel, GameModel, updateGameModel, Wallet } from \"../gamelogic/gamemodel\";\n  import type { Upgrade } from \"../gamelogic/village/villagebuildings\";\n\n  export let building: VillageBuilding;\n\n  $: subheader = `Lv. ${building.level}`;\n\n  export let selected: string;\n\n  let gameModelInstance: GameModel;\n  gameModel.subscribe((m) => (gameModelInstance = m));\n\n  function upgrade(building: VillageBuilding) {\n    building.upgrade(gameModelInstance.wallet);\n    updateGameModel();\n  }\n\n  $: can_afford = () => {\n    const next = building.getNextUpgrade();\n    if (!next) return false;\n    return gameModelInstance.wallet.money >= next.money_cost;\n  };\n</script>\n\n<div class=\"my-card\">\n  <Card.Card class=\"bg-white\">\n    <div slot=\"title\"><Card.Title title={building.getDisplayName()} {subheader} /></div>\n    <div slot=\"text\" class=\"pb-0 pt-0 p-5\">Cost to upgrade: {building.getUpgradeMoneyCostAsString()}</div>\n    <div slot=\"actions\">\n      <div class=\"p-2\">\n        <Button\n          text\n          disabled={building.level == 0}\n          on:click={() => {\n            selected = building.short_name;\n          }}>Visit</Button\n        >\n        <Button disabled={!can_afford()} text on:click={upgrade(building)}>Upgrade</Button>\n      </div>\n    </div>\n  </Card.Card>\n</div>\n\n<style>\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;wBA+ByC,GAAQ,IAAC,cAAc;;;;;;;;;;;;;;;;;;uEAAvB,GAAQ,IAAC,cAAc;;;;;;;;;;;;;;;;;;;;;;;;6BACH,GAAQ,IAAC,2BAA2B;;;;;;;;;;;;;;;;;uEAApC,GAAQ,IAAC,2BAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2BAK7E,GAAQ,IAAC,KAAK,IAAI,CAAC;;;;;;;;;;8BAKZ,GAAU;;;;;;;;8BAAmB,GAAO,iBAAC,GAAQ,mBAAhB,GAAO,iBAAC,GAAQ;;;;;;;;;;;;;;;;;;;;;;;;uEALpD,GAAQ,IAAC,KAAK,IAAI,CAAC;;;;;;;;4EAKZ,GAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAlCxB,QAAyB;OAIzB,QAAgB;KAEvB,iBAA4B;CAChC,SAAS,CAAC,SAAS,CAAE,CAAC,oBAAM,iBAAiB,GAAG,CAAC;;UAExC,OAAO,CAAC,QAAyB;EACxC,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CAAC,MAAM;EACzC,eAAe;;;;kBAoBP,QAAQ,GAAG,QAAQ,CAAC,UAAU;;;;;;;;;;oBA7BrC,SAAS,UAAU,QAAQ,CAAC,KAAK;;;;oBAYjC,UAAU;UACL,IAAI,GAAG,QAAQ,CAAC,cAAc;SAC/B,IAAI,SAAS,KAAK;WAChB,iBAAiB,CAAC,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;"}