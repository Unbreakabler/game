{"version":3,"file":"tower_slot.svelte.js","sources":["../../../../src/components/tower_slot.svelte"],"sourcesContent":["<script lang='ts'>\n  import { GameModel, gameModel } from \"../gamelogic/gamemodel\";\n  import type { TowerInfo, TowerId } from \"../gamelogic/td/tower_defense\";\n\n  let gameModelInstance: GameModel;\n  gameModel.subscribe((m) => (gameModelInstance = m));\n\n  const toggleTowerSelection = (tower_id: string | null) => {\n    if (tower_id && gameModelInstance.tower_defense.selection?.id != tower_id) {\n      gameModelInstance.tower_defense.setSelection(tower_id as TowerId)\n    } else {\n      gameModelInstance.tower_defense.selection = null  \n    }\n  }\n\n  // Why doesn't this guard work on line 32?\n  function isTower(tower: TowerInfo | undefined | null | string): tower is TowerInfo {\n    return tower ? (tower as TowerInfo).status.tier !== undefined : false\n  }\n\n  export let tower_info: TowerInfo | null;\n  export let tower_id: string | null;\n\n  $: selection_id = gameModelInstance.tower_defense.selection?.id || null;\n</script>\n\n<div class:bb={tower_id && selection_id === tower_id} class=\"item\" on:click={() => toggleTowerSelection(tower_id)}>\n  {#if isTower(tower_info)}\n    <span>Tier: {tower_info.status.tier}</span>\n    <button class={tower_info.status.type}></button>\n  {:else if tower_info === null}\n    X <!-- Empty slot - TODO(jon): use a \"lock\" icon -->\n  {/if}\n</div>\n\n<style lang='scss'>\n  div {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n  }\n  button {\n    border: none;\n    height: 32px;\n    width: 32px;\n  }\n  .basic {\n    background-image: url('static/shotgun.png');\n  }\n  .machine_gun {\n    background-image: url('static/machine_gun.png');\n  }\n  .active {\n\t\tbackground-color: green;\n\t}\n\n  %full-fill {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n\n  $anime-time: 8s;\n\n  $box-size: 75px;\n  $clip-distance: .05;\n  $clip-size: $box-size * (1 + $clip-distance * 2);\n  $path-width: 2px;\n\n  $selected-colour: #50bd48;\n  $unselected-colour: #353535;\n\n  .item {\n    position: relative;\n    width: $box-size;\n    height: $box-size;\n    margin: 5px;\n    color: $unselected-colour;\n    box-shadow: inset 0 0 0 1px rgba($unselected-colour, .5);\n  }\n\n  .bb {\n    color: $selected-colour;\n    box-shadow: inset 0 0 0 1px rgba($selected-colour, .5);\n\n    &::before,\n    &::after {\n      @extend %full-fill;\n      content: '';\n      z-index: 1;\n      margin: -1 * $clip-distance * 100%;\n      box-shadow: inset 0 0 0 $path-width; \n      animation: clipMe $anime-time linear infinite;\n    }\n\n    &::before {\n      animation-delay: $anime-time * -.5;\n    }\n  }\n\n  @keyframes clipMe {\n    0%, 100% {clip: rect(0px, $clip-size, $path-width, 0px); }\n    25% {clip: rect(0px, $path-width, $clip-size, 0px); }\n    50% {clip: rect($clip-size - $path-width, $clip-size, $clip-size, 0px); }\n    75% {clip: rect(0px, $clip-size, $clip-size, $clip-size - $path-width); }\n  }\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BA4BiB,GAAU,IAAC,MAAM,CAAC,IAAI;;;;;;;;;;;;;iFACpB,GAAU,IAAC,MAAM,CAAC,IAAI;;;;;;;;;;2EADxB,GAAU,IAAC,MAAM,CAAC,IAAI;;mHACpB,GAAU,IAAC,MAAM,CAAC,IAAI;;;;;;;;;;;;;;;;;;;+DAFlC,OAAO,gBAAC,GAAU;;qBAGb,GAAU,QAAK,IAAI;;;;;;;;;;;wCAJhB,GAAQ,wBAAI,GAAY,qBAAK,GAAQ;;;;;;;;;;;;;;;;;;;;;;;;;yCAArC,GAAQ,wBAAI,GAAY,qBAAK,GAAQ;;;;;;;;;;;;;;;;;;SAVzC,OAAO,CAAC,KAA4C;QACpD,KAAK,GAAI,KAAmB,CAAC,MAAM,CAAC,IAAI,KAAK,SAAS,GAAG,KAAK;;;;;;KAbnE,iBAA4B;CAChC,SAAS,CAAC,SAAS,CAAE,CAAC,oBAAM,iBAAiB,GAAG,CAAC;;OAE3C,oBAAoB,GAAI,QAAuB;MAC/C,QAAQ,IAAI,iBAAiB,CAAC,aAAa,CAAC,SAAS,EAAE,EAAE,IAAI,QAAQ;GACvE,iBAAiB,CAAC,aAAa,CAAC,YAAY,CAAC,QAAmB;;mBAEhE,iBAAiB,CAAC,aAAa,CAAC,SAAS,GAAG,IAAI;;;;OASzC,UAA4B;OAC5B,QAAuB;6BAK+C,oBAAoB,CAAC,QAAQ;;;;;;;;;oBAH3G,YAAY,GAAG,iBAAiB,CAAC,aAAa,CAAC,SAAS,EAAE,EAAE,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;;"}