{"version":3,"file":"mine.svelte.js","sources":["../../../../src/components/mine.svelte"],"sourcesContent":["<script lang='ts'>\n  import type { Mine } from \"../gamelogic/village/mine\";\n  import { gameModel, GameModel } from \"../gamelogic/gamemodel\";\n\n  import { formatNumber } from \"../gamelogic/util/utils\";\n\n  import ProgressBar from \"./progress_bar.svelte\";\n  import type { MINE } from \"../gamelogic/village/mines\";\n\n  let gameModelInstance: GameModel;\n  gameModel.subscribe((m) => (gameModelInstance = m));\n\n  export let mine: Mine;\n  export let purchase_quantity: number = 0;\n\n  const icon_class = mine.short_name as string\n\n  const manuallyMine = () => {\n    mine.manuallyMine()\n  }\n\n  const purchaseMine = () => {\n    mine.requestLevelUp(gameModelInstance.wallet, purchase_amount)\n  }\n\n  $: is_active = mine.active;\n  $: max_level_affordable = Math.max(mine.getMaxLevelAffordable(gameModelInstance.wallet.money), 1)\n  $: purchase_amount = Math.min(purchase_quantity, max_level_affordable)\n  $: purchase_cost = mine.getTotalMoneyToLevel(purchase_amount)\n\n  $: button_text = is_active ? `Level Up x${purchase_amount}` : `Buy Lv. ${purchase_amount}`\n  $: is_affordable = gameModelInstance.wallet.money >= purchase_cost\n  $: button_class = is_affordable ? 'affordable' : 'non-affordable'\n\n</script>\n\n<div class=\"container\">\n  <row>\n    <div on:click={manuallyMine} class={icon_class}></div>\n    <column class=\"mine-info\">\n      <row>{mine.display_name} - Lv. {mine.level} - Produces: {mine.production}</row>\n      <ProgressBar current={mine.current_timer_ms} total={mine.mine_timer_ms} />\n    </column>\n    <button class={button_class} on:click={purchaseMine}>\n      <div class=\"cost\">\n        <div class=\"coin\" /> {formatNumber(purchase_cost, 0)}\n      </div>\n      <div class=\"purchase-info\">\n        {button_text}\n      </div>\n    </button>\n  </row>\n</div>\n\n<style lang='scss'>\n  .container {\n    background-color: grey;\n    margin: 5px;\n    padding: 10px;\n    display: flex;\n    flex-direction: column;\n  }\n  row {\n    display: flex;\n  }\n  column {\n    margin: 0px 10px;\n  }\n\n  button {\n    width: 15rem;\n    color: #fff;\n    display: flex;\n    flex-direction: column;\n  }\n  .affordable {\n    background-color: #DE9B61;\n    border: 2px solid #BD7639;\n    .cost {\n      background-color: #98541A;\n    }\n  }\n  .non-affordable {\n    background-color: #7a7a7a;\n    border: 2px solid #c3c3c3;\n    .cost {\n      background-color: #414141;\n    }\n  }\n\n  .mine-info {\n    flex: 1;\n    align-items: flex-end;\n  }\n\n\n  .purchase-info {\n    flex: 1;\n  }\n\n  \n  .dirt {\n    background-image: url('static/ore.png');\n    background-size: contain;\n    background-color: rgba(167, 68, 29, 0.966);\n    background-blend-mode: multiply;\n    width: 4rem;\n    height: 4rem;\n  }\n  .stone {\n    background-image: url('static/ore.png');\n    background-size: contain;\n    background-color: rgba(197, 197, 197, 0.966);\n    background-blend-mode: multiply;\n    width: 4rem;\n    height: 4rem;\n  }\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;yBAwCY,GAAI,IAAC,YAAY;;;yBAAS,GAAI,IAAC,KAAK;;;yBAAe,GAAI,IAAC,UAAU;;;;;;;;;gBAKhD,YAAY,mBAAC,GAAa,KAAE,CAAC;;;;;;;;;;;;sBAJ/B,GAAI,IAAC,gBAAgB;oBAAS,GAAI,IAAC,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAOnE,GAAW;0DAVoB,GAAU;;;;;;mFAK/B,GAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4CALZ,GAAY;8CAKY,GAAY;;;;;;;6EAH3C,GAAI,IAAC,YAAY;6EAAS,GAAI,IAAC,KAAK;6EAAe,GAAI,IAAC,UAAU;;kEAClD,GAAI,IAAC,gBAAgB;gEAAS,GAAI,IAAC,aAAa;;6EAI9C,YAAY,mBAAC,GAAa,KAAE,CAAC;4EAGlD,GAAW;;mIALD,GAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAlCzB,iBAA4B;CAChC,SAAS,CAAC,SAAS,CAAE,CAAC,oBAAM,iBAAiB,GAAG,CAAC;OAEtC,IAAU;OACV,iBAAiB,GAAW,CAAC;OAElC,UAAU,GAAG,IAAI,CAAC,UAAoB;;OAEtC,YAAY;EAChB,IAAI,CAAC,YAAY;;;OAGb,YAAY;EAChB,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,MAAM,EAAE,eAAe;;;;;;;;;;qBAG5D,SAAS,GAAG,IAAI,CAAC,MAAM;;;;qBACvB,oBAAoB,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC;;;;oBAC7F,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,oBAAoB;;;;oBAClE,aAAa,GAAG,IAAI,CAAC,oBAAoB,CAAC,eAAe;;;;oBAEzD,WAAW,GAAG,SAAS;kBAAgB,eAAe;gBAAgB,eAAe;;;;qBACrF,aAAa,GAAG,iBAAiB,CAAC,MAAM,CAAC,KAAK,IAAI,aAAa;;;;oBAC/D,YAAY,GAAG,aAAa,GAAG,YAAY,GAAG,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}