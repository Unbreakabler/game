{"version":3,"file":"health_bar.js","sources":["../../../../../src/scenes/entities/health_bar.ts"],"sourcesContent":["export class HealthBar extends Phaser.GameObjects.Rectangle {\n  private current_hp: number;\n  private starting_hp: number;\n  private background_bar: Phaser.GameObjects.Rectangle\n  private starting_width: number;\n\n  constructor(scene: Phaser.Scene, x: number, y: number, width: number, starting_hp: number) {\n    const height = 5;\n    super(scene, x, y, width, height, 0x00ff00);\n    scene.add.existing(this);\n    this.starting_hp = starting_hp\n    this.current_hp = this.starting_hp;\n    this.starting_width = width;\n\n    this.background_bar = scene.add.rectangle(x, y - 1, width, height + 2, 0x000000)\n    this.background_bar.setStrokeStyle(1, 0xffffff)\n    this.background_bar.setDepth(-1)\n\n    this.setVisible(false);\n    this.background_bar.setVisible(false);\n  }\n\n  public preDestroy() {\n    this.background_bar.destroy();\n  }\n\n  public setCurrentHp(health_points: number) {\n    if (health_points !== this.current_hp) {\n      this.current_hp = health_points;\n  \n      const r = this.current_hp / this.starting_hp\n      this.width = this.starting_width * r;\n    }\n    if (this.current_hp < this.starting_hp && !this.visible) {\n      this.setVisible(true);\n      this.background_bar.setVisible(true);\n      this.background_bar.setActive(true);\n    }\n  }\n\n  public setPosition(x: number, y: number): this {\n    this.x = x;\n    this.y = y;\n    if (this.background_bar) {\n      this.background_bar.setPosition(x, y);\n    }\n    return this\n  }\n}"],"names":[],"mappings":"MAAa,SAAU,SAAQ,MAAM,CAAC,WAAW,CAAC,SAAS;IAMzD,YAAY,KAAmB,EAAE,CAAS,EAAE,CAAS,EAAE,KAAa,EAAE,WAAmB;QACvF,MAAM,MAAM,GAAG,CAAC,CAAC;QACjB,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;QAC5C,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAA;QAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;QACnC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAE5B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAA;QAChF,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAA;QAC/C,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;QAEhC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACvB,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;KACvC;IAEM,UAAU;QACf,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;KAC/B;IAEM,YAAY,CAAC,aAAqB;QACvC,IAAI,aAAa,KAAK,IAAI,CAAC,UAAU,EAAE;YACrC,IAAI,CAAC,UAAU,GAAG,aAAa,CAAC;YAEhC,MAAM,CAAC,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAA;YAC5C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;SACtC;QACD,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACvD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YACtB,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YACrC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;SACrC;KACF;IAEM,WAAW,CAAC,CAAS,EAAE,CAAS;QACrC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACvC;QACD,OAAO,IAAI,CAAA;KACZ;;;;;"}