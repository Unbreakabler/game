{"version":3,"file":"enemy.js","sources":["../../../../../src/scenes/entities/enemy.ts"],"sourcesContent":["const DEFAULT_ENEMY_SPEED = 1/10000;\n\nexport default class Enemy extends Phaser.GameObjects.Sprite {\n  public follower: { t: number, vec: Phaser.Math.Vector2}\n  private path: Phaser.Curves.Path | null = null\n  private speed: number = DEFAULT_ENEMY_SPEED;\n  private health_points = 100;\n  constructor(scene: Phaser.Scene) {\n    super(scene, 0, 0, 'green-knight');\n    this.anims.play('green-knight-idle')\n    this.follower = { t: 0, vec: new Phaser.Math.Vector2() };\n  }\n\n  public setSpeed(speed: number) {\n    this.speed = speed;\n  }\n\n  public startOnPath (path: Phaser.Curves.Path) {\n    this.path = path\n    // set the t parameter at the start of the path\n    this.follower.t = 0;\n    \n    // get x and y of the given t point            \n    this.path.getPoint(this.follower.t, this.follower.vec);\n    \n    // set the x and y of our enemy to the received from the previous step\n    this.setPosition(this.follower.vec.x, this.follower.vec.y);\n  }\n\n  public update (time: number, delta: number) {\n    // move the t point along the path, 0 is the start and 0 is the end\n    if (!this.path) {\n      return // skip updates if path has not be set by startOnPath\n    }\n    this.follower.t += this.speed * delta;\n    \n    // get the new x and y coordinates in vec\n    this.path.getPoint(this.follower.t, this.follower.vec);\n    \n    // update enemy x and y to the newly obtained x and y\n    this.setPosition(this.follower.vec.x, this.follower.vec.y);\n\n    // if we have reached the end of the path, remove the enemy\n    if (this.follower.t >= 1)\n    {\n      this.setActive(false);\n      this.setVisible(false);\n    }\n  }\n\n  public receiveDamage(damage: number) {\n    this.health_points -= damage;\n    if (this.health_points < 0) {\n      this.setActive(false);\n      this.setVisible(false);\n    }\n  }\n}"],"names":[],"mappings":"AAAA,MAAM,mBAAmB,GAAG,CAAC,GAAC,KAAK,CAAC;MAEf,KAAM,SAAQ,MAAM,CAAC,WAAW,CAAC,MAAM;IAK1D,YAAY,KAAmB;QAC7B,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC;QAJ7B,SAAI,GAA8B,IAAI,CAAA;QACtC,UAAK,GAAW,mBAAmB,CAAC;QACpC,kBAAa,GAAG,GAAG,CAAC;QAG1B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAA;QACpC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC;KAC1D;IAEM,QAAQ,CAAC,KAAa;QAC3B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAEM,WAAW,CAAE,IAAwB;QAC1C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;;QAEhB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;;QAGpB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;;QAGvD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KAC5D;IAEM,MAAM,CAAE,IAAY,EAAE,KAAa;;QAExC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,OAAM;SACP;QACD,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;;QAGtC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;;QAGvD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;QAG3D,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,EACxB;YACE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACtB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;SACxB;KACF;IAEM,aAAa,CAAC,MAAc;QACjC,IAAI,CAAC,aAAa,IAAI,MAAM,CAAC;QAC7B,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,EAAE;YAC1B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACtB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;SACxB;KACF;;;;;"}