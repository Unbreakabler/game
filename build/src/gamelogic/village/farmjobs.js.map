{"version":3,"file":"farmjobs.js","sources":["../../../../../src/gamelogic/village/farmjobs.ts"],"sourcesContent":["import { classToClass, plainToClassFromExist, TransformFnParams } from \"class-transformer\";\nimport { FarmJob } from \"./farmjob\";\n\nexport enum FARM_JOB {\n  empty_zero,\n  poopshoveler,\n  apprenticefarmhand,\n  farmhand,\n  farmer,\n  farmboss,\n}\n\nconst pre = \"farmjob\";\n\nconst arr: FarmJob[] = [\n  new FarmJob(FARM_JOB.poopshoveler, [], \"Poop Shoveler\", \"Someone has to do it.\", 1),\n  new FarmJob(\n    FARM_JOB.apprenticefarmhand,\n    [{ achievable_name: `${pre}_${FARM_JOB.poopshoveler}`, level_required: 10 }],\n    \"Apprentice Farmhand\",\n    \"Just learning the ropes.\",\n    2,\n  ),\n  new FarmJob(FARM_JOB.farmhand, [{ achievable_name: `${pre}_${FARM_JOB.apprenticefarmhand}`, level_required: 20 }], \"Farmhand\", \"\", 3),\n  new FarmJob(FARM_JOB.farmer, [{ achievable_name: `${pre}_${FARM_JOB.farmhand}`, level_required: 50 }], \"Farmer\", \"\", 4),\n  new FarmJob(FARM_JOB.farmboss, [{ achievable_name: `${pre}_${FARM_JOB.farmer}`, level_required: 100 }], \"Farm Boss\", \"\", 5),\n];\n\nexport const get_default_farm_jobs = (): Map<string, FarmJob> => {\n  return arr.reduce(function (map, obj) {\n    map.set(obj.getAchievableName(), classToClass(obj, { ignoreDecorators: true }));\n    return map;\n  }, new Map<string, FarmJob>());\n};\n\nexport function farmJobTransformer(param: TransformFnParams): Map<string, FarmJob> {\n  const map = new Map(Object.entries(param.obj.farm_jobs));\n  for (const [name, farm_job] of map.entries()) {\n    const default_farm_job = get_default_farm_jobs().get(name);\n    if (!default_farm_job) throw new Error(`Corrupt Save. FarmJob ${name} is invalid.`);\n    map.set(name, plainToClassFromExist(default_farm_job, farm_job));\n  }\n  return map as Map<string, FarmJob>;\n}\n"],"names":[],"mappings":";;;IAGY;AAAZ,WAAY,QAAQ;IAClB,mDAAU,CAAA;IACV,uDAAY,CAAA;IACZ,mEAAkB,CAAA;IAClB,+CAAQ,CAAA;IACR,2CAAM,CAAA;IACN,+CAAQ,CAAA;AACV,CAAC,EAPW,QAAQ,KAAR,QAAQ,QAOnB;AAED,MAAM,GAAG,GAAG,SAAS,CAAC;AAEtB,MAAM,GAAG,GAAc;IACrB,IAAI,OAAO,CAAC,QAAQ,CAAC,YAAY,EAAE,EAAE,EAAE,eAAe,EAAE,uBAAuB,EAAE,CAAC,CAAC;IACnF,IAAI,OAAO,CACT,QAAQ,CAAC,kBAAkB,EAC3B,CAAC,EAAE,eAAe,EAAE,GAAG,GAAG,IAAI,QAAQ,CAAC,YAAY,EAAE,EAAE,cAAc,EAAE,EAAE,EAAE,CAAC,EAC5E,qBAAqB,EACrB,0BAA0B,EAC1B,CAAC,CACF;IACD,IAAI,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,EAAE,eAAe,EAAE,GAAG,GAAG,IAAI,QAAQ,CAAC,kBAAkB,EAAE,EAAE,cAAc,EAAE,EAAE,EAAE,CAAC,EAAE,UAAU,EAAE,EAAE,EAAE,CAAC,CAAC;IACrI,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,eAAe,EAAE,GAAG,GAAG,IAAI,QAAQ,CAAC,QAAQ,EAAE,EAAE,cAAc,EAAE,EAAE,EAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC;IACvH,IAAI,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,EAAE,eAAe,EAAE,GAAG,GAAG,IAAI,QAAQ,CAAC,MAAM,EAAE,EAAE,cAAc,EAAE,GAAG,EAAE,CAAC,EAAE,WAAW,EAAE,EAAE,EAAE,CAAC,CAAC;CAC5H,CAAC;MAEW,qBAAqB,GAAG;IACnC,OAAO,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,GAAG;QAClC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,iBAAiB,EAAE,EAAE,YAAY,CAAC,GAAG,EAAE,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAChF,OAAO,GAAG,CAAC;KACZ,EAAE,IAAI,GAAG,EAAmB,CAAC,CAAC;AACjC,EAAE;SAEc,kBAAkB,CAAC,KAAwB;IACzD,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;IACzD,KAAK,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,GAAG,CAAC,OAAO,EAAE,EAAE;QAC5C,MAAM,gBAAgB,GAAG,qBAAqB,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAC3D,IAAI,CAAC,gBAAgB;YAAE,MAAM,IAAI,KAAK,CAAC,yBAAyB,IAAI,cAAc,CAAC,CAAC;QACpF,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,qBAAqB,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC,CAAC;KAClE;IACD,OAAO,GAA2B,CAAC;AACrC;;;;"}