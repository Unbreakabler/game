{"version":3,"file":"mines.js","sources":["../../../../../src/gamelogic/village/mines.ts"],"sourcesContent":["import { classToClass, plainToClassFromExist, TransformFnParams } from 'class-transformer';\nimport { Mine } from './mine'\n\nexport enum MINE {\n  dirt = \"dirt\",\n  stone = \"stone\",\n}\n\nconst pre = 'mine'\n\nconst mine_array: Mine[] = [\n  new Mine(MINE.dirt, [], `${pre}_${MINE.dirt}`, \"Your first mine! Gather resources to build towers and ammo\", 1, false),\n  new Mine(MINE.stone, [], `${pre}_${MINE.stone}`, \"Stone\", 5)\n]\n\nexport const get_default_mines = (): Map<string, Mine> => {\n  return mine_array.reduce((map, mine) => {\n    map.set(mine.getAchievableName(), classToClass(mine, { ignoreDecorators: true}))\n    return map;\n  }, new Map<string, Mine>());\n}\n\nexport function MineTransformer(param: TransformFnParams): Map<string, Mine> {\n  const map = new Map(Object.entries(param.obj.mines));\n  for (const [name, mine] of map.entries()) {\n    const default_mine = get_default_mines().get(name);\n    if (!default_mine) throw new Error(`Corrupt Save. Mine ${name} is invalid`)\n    map.set(name, plainToClassFromExist(default_mine, mine))\n  }\n  return map as Map<string, Mine>;\n}\n"],"names":[],"mappings":";;;IAGY;AAAZ,WAAY,IAAI;IACd,qBAAa,CAAA;IACb,uBAAe,CAAA;AACjB,CAAC,EAHW,IAAI,KAAJ,IAAI,QAGf;AAED,MAAM,GAAG,GAAG,MAAM,CAAA;AAElB,MAAM,UAAU,GAAW;IACzB,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,EAAE,4DAA4D,EAAE,CAAC,EAAE,KAAK,CAAC;IACtH,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,EAAE,GAAG,GAAG,IAAI,IAAI,CAAC,KAAK,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC;CAC7D,CAAA;MAEY,iBAAiB,GAAG;IAC/B,OAAO,UAAU,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI;QACjC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAE,YAAY,CAAC,IAAI,EAAE,EAAE,gBAAgB,EAAE,IAAI,EAAC,CAAC,CAAC,CAAA;QAChF,OAAO,GAAG,CAAC;KACZ,EAAE,IAAI,GAAG,EAAgB,CAAC,CAAC;AAC9B,EAAC;SAEe,eAAe,CAAC,KAAwB;IACtD,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;IACrD,KAAK,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC,OAAO,EAAE,EAAE;QACxC,MAAM,YAAY,GAAG,iBAAiB,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,YAAY;YAAE,MAAM,IAAI,KAAK,CAAC,sBAAsB,IAAI,aAAa,CAAC,CAAA;QAC3E,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,qBAAqB,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC,CAAA;KACzD;IACD,OAAO,GAAwB,CAAC;AAClC;;;;"}