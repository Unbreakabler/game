{"version":3,"file":"range_indicator.js","sources":["../../../../../../../src/scenes/entities/towers/components/range_indicator.ts"],"sourcesContent":["import { OutlinePipeline } from \"../../../../plugins/outline\";\nimport type TD from \"../../../td\";\nimport type Tower from \"../tower\"\n\n// lookup is_placeable here?\n\nconst red = 0xff0000\nconst green = 0x00ff00\nconst blue = 0x0000ff\n\nexport default () => {\n  return {\n    type: 'range_indicator',\n    onInit: (parent: Tower, td_scene: TD, x: number, y:number) => {\n      parent.range_indicator = parent.td_scene.add.circle(parent.x, parent.y, parent.tower_info.attributes.range, 0xff0000, 0.5);\n      parent.range_indicator.setStrokeStyle(2, 0xffffff);\n      parent.range_indicator.setVisible(false);\n    },\n    onUpdate: (parent: Tower, time: number, delta: number) => {\n      if (parent.selection !== 'selected') {\n        parent.range_indicator?.setVisible(false);\n        return;\n      }\n      parent.range_indicator?.setVisible(true);\n      if (parent.is_placed) {\n        parent.range_indicator?.setFillStyle(blue, 0.15);\n      } else {\n        let outline_color: Phaser.Display.Color;\n        if (parent.is_placeable) {\n          parent.range_indicator?.setFillStyle(green, 0.3);\n          outline_color = new Phaser.Display.Color(0, 255, 0);\n        } else {\n          parent.range_indicator?.setFillStyle(red, 0.3);\n          outline_color = new Phaser.Display.Color(255, 0, 0);\n        }\n        let outline = parent.static_sprites?.getPostPipeline(OutlinePipeline)\n        if (outline) {\n          (outline as OutlinePipeline).outlineColor = outline_color;\n        }\n        outline = parent.rotating_sprites?.getPostPipeline(OutlinePipeline)\n        if (outline) {\n          (outline as OutlinePipeline).outlineColor = outline_color;\n        }\n      }\n    }\n  }\n}"],"names":[],"mappings":";;AAIA;AAEA,MAAM,GAAG,GAAG,QAAQ,CAAA;AACpB,MAAM,KAAK,GAAG,QAAQ,CAAA;AACtB,MAAM,IAAI,GAAG,QAAQ,CAAA;AAErB,sBAAe;IACb,OAAO;QACL,IAAI,EAAE,iBAAiB;QACvB,MAAM,EAAE,CAAC,MAAa,EAAE,QAAY,EAAE,CAAS,EAAE,CAAQ;YACvD,MAAM,CAAC,eAAe,GAAG,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,KAAK,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;YAC3H,MAAM,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;YACnD,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;SAC1C;QACD,QAAQ,EAAE,CAAC,MAAa,EAAE,IAAY,EAAE,KAAa;YACnD,IAAI,MAAM,CAAC,SAAS,KAAK,UAAU,EAAE;gBACnC,MAAM,CAAC,eAAe,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;gBAC1C,OAAO;aACR;YACD,MAAM,CAAC,eAAe,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC;YACzC,IAAI,MAAM,CAAC,SAAS,EAAE;gBACpB,MAAM,CAAC,eAAe,EAAE,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aAClD;iBAAM;gBACL,IAAI,aAAmC,CAAC;gBACxC,IAAI,MAAM,CAAC,YAAY,EAAE;oBACvB,MAAM,CAAC,eAAe,EAAE,YAAY,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;oBACjD,aAAa,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;iBACrD;qBAAM;oBACL,MAAM,CAAC,eAAe,EAAE,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;oBAC/C,aAAa,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;iBACrD;gBACD,IAAI,OAAO,GAAG,MAAM,CAAC,cAAc,EAAE,eAAe,CAAC,eAAe,CAAC,CAAA;gBACrE,IAAI,OAAO,EAAE;oBACV,OAA2B,CAAC,YAAY,GAAG,aAAa,CAAC;iBAC3D;gBACD,OAAO,GAAG,MAAM,CAAC,gBAAgB,EAAE,eAAe,CAAC,eAAe,CAAC,CAAA;gBACnE,IAAI,OAAO,EAAE;oBACV,OAA2B,CAAC,YAAY,GAAG,aAAa,CAAC;iBAC3D;aACF;SACF;KACF,CAAA;AACH,CAAC;;;;"}