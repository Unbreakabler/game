{"version":3,"file":"combat_text.js","sources":["../../../../../src/scenes/entities/combat_text.ts"],"sourcesContent":["const DEFAULT_STYLE = {\n  fontFamily: 'Courier',\n  fontSize: '16px',\n  fontStyle: '',\n  backgroundColor: '',\n  color: '#fff',\n  stroke: '#fff',\n  strokeThickness: 0,\n  align: 'center',\n  maxLines: 0,\n  fixedWidth: 0,\n  fixedHeight: 0,\n  rtl: false,\n}\n\n\n// TODO(jon): Add more styles for different types of hits\n// fire can be red, ice blue, etc\n// crits should be larger and \"shake\" or something for impact\n\nexport class CombatText extends Phaser.GameObjects.Text {\n  private starting_lifespan: number;\n  private remaining_lifespawn: number;\n\n  constructor(scene: Phaser.Scene, \n              x: number, \n              y: number, \n              text: string, \n              style: Phaser.GameObjects.TextStyle = (DEFAULT_STYLE as unknown) as Phaser.GameObjects.TextStyle, \n              lifespan: number = 250\n  ) {\n    super(scene, x, y, text, style);\n    scene.add.existing(this);\n    this.starting_lifespan = lifespan;\n    this.remaining_lifespawn = lifespan;\n  }\n\n  // Either remove the text or float it up and fade it.\n  public preUpdate(time: number, delta: number) {\n    this.remaining_lifespawn -= delta;\n\n    if (this.remaining_lifespawn < 0) {\n      this.setActive(false);\n      this.setVisible(false);\n      this.destroy();\n      return;\n    }\n    this.float();\n    this.fade();\n  }\n\n  private float() {\n    // Slowly float combat text up over lifespan\n    this.y -= 1\n  }\n  \n  // Slowly fade the alpha of the text to 0 over the lifespan of the combat text\n  private fade() {\n    const lifetime_used = this.starting_lifespan / this.remaining_lifespawn \n    this.setAlpha(lifetime_used)\n  }\n\n  \n}"],"names":[],"mappings":"AAAA,MAAM,aAAa,GAAG;IACpB,UAAU,EAAE,SAAS;IACrB,QAAQ,EAAE,MAAM;IAChB,SAAS,EAAE,EAAE;IACb,eAAe,EAAE,EAAE;IACnB,KAAK,EAAE,MAAM;IACb,MAAM,EAAE,MAAM;IACd,eAAe,EAAE,CAAC;IAClB,KAAK,EAAE,QAAQ;IACf,QAAQ,EAAE,CAAC;IACX,UAAU,EAAE,CAAC;IACb,WAAW,EAAE,CAAC;IACd,GAAG,EAAE,KAAK;CACX,CAAA;AAGD;AACA;AACA;MAEa,UAAW,SAAQ,MAAM,CAAC,WAAW,CAAC,IAAI;IAIrD,YAAY,KAAmB,EACnB,CAAS,EACT,CAAS,EACT,IAAY,EACZ,QAAuC,aAAyD,EAChG,WAAmB,GAAG;QAEhC,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QAChC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC;QAClC,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CAAC;KACrC;;IAGM,SAAS,CAAC,IAAY,EAAE,KAAa;QAC1C,IAAI,CAAC,mBAAmB,IAAI,KAAK,CAAC;QAElC,IAAI,IAAI,CAAC,mBAAmB,GAAG,CAAC,EAAE;YAChC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACtB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,OAAO;SACR;QACD,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,EAAE,CAAC;KACb;IAEO,KAAK;;QAEX,IAAI,CAAC,CAAC,IAAI,CAAC,CAAA;KACZ;;IAGO,IAAI;QACV,MAAM,aAAa,GAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,mBAAmB,CAAA;QACvE,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAA;KAC7B;;;;;"}