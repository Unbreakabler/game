{"version":3,"file":"modal.svelte.js","sources":["../../../../src/components/modal.svelte"],"sourcesContent":["<script>\n\timport { createEventDispatcher, onDestroy } from 'svelte';\n\n\tconst dispatch = createEventDispatcher();\n\tconst close = () => dispatch('close');\n\n\tlet modal;\n\n\tconst handle_keydown = e => {\n\t\tif (e.key === 'Escape') {\n\t\t\tclose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.key === 'Tab') {\n\t\t\t// trap focus\n\t\t\tconst nodes = modal.querySelectorAll('*');\n\t\t\tconst tabbable = Array.from(nodes).filter(n => n.tabIndex >= 0);\n\n\t\t\tlet index = tabbable.indexOf(document.activeElement);\n\t\t\tif (index === -1 && e.shiftKey) index = 0;\n\n\t\t\tindex += tabbable.length + (e.shiftKey ? -1 : 1);\n\t\t\tindex %= tabbable.length;\n\n\t\t\ttabbable[index].focus();\n\t\t\te.preventDefault();\n\t\t}\n\t};\n\n\tconst previously_focused = typeof document !== 'undefined' && document.activeElement;\n\n\tif (previously_focused) {\n\t\tonDestroy(() => {\n\t\t\tpreviously_focused.focus();\n\t\t});\n\t}\n</script>\n\n<svelte:window on:keydown={handle_keydown}/>\n\n<div class=\"modal-background\" on:click={close}></div>\n\n<div class=\"modal\" role=\"dialog\" aria-modal=\"true\" bind:this={modal}>\n\t<slot name=\"header\"></slot>\n\t<hr>\n\t<slot></slot>\n\t<hr>\n\n\t<!-- svelte-ignore a11y-autofocus -->\n\t<button autofocus on:click={close}>close modal</button>\n</div>\n\n<style>\n\t.modal-background {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: rgba(0,0,0,0.3);\n\t}\n\n\t.modal {\n\t\tposition: absolute;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\twidth: calc(100vw - 4em);\n\t\tmax-width: 32em;\n\t\tmax-height: calc(100vh - 4em);\n\t\toverflow: auto;\n\t\ttransform: translate(-50%,-50%);\n\t\tpadding: 1em;\n\t\tborder-radius: 0.2em;\n\t\tbackground: white;\n\t}\n\n\tbutton {\n\t\tdisplay: block;\n\t}\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kDAuC2B,GAAc;qCAED,GAAK;uCAShB,GAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OA/C3B,QAAQ,GAAG,qBAAqB;OAChC,KAAK,SAAS,QAAQ,CAAC,OAAO;KAEhC,KAAK;;OAEH,cAAc,GAAG,CAAC;MACnB,CAAC,CAAC,GAAG,KAAK,QAAQ;GACrB,KAAK;;;;MAIF,CAAC,CAAC,GAAG,KAAK,KAAK;;SAEZ,KAAK,GAAG,KAAK,CAAC,gBAAgB,CAAC,GAAG;;SAClC,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,IAAI,CAAC;OAE1D,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa;OAC/C,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,KAAK,GAAG,CAAC;GAEzC,KAAK,IAAI,QAAQ,CAAC,MAAM,IAAI,CAAC,CAAC,QAAQ,IAAI,CAAC,GAAG,CAAC;GAC/C,KAAK,IAAI,QAAQ,CAAC,MAAM;GAExB,QAAQ,CAAC,KAAK,EAAE,KAAK;GACrB,CAAC,CAAC,cAAc;;;;OAIZ,kBAAkB,UAAU,QAAQ,KAAK,WAAW,IAAI,QAAQ,CAAC,aAAa;;KAEhF,kBAAkB;EACrB,SAAS;GACR,kBAAkB,CAAC,KAAK;;;;;;GASmC,KAAK;;;;;;;;;;;;;;;;;;;;;;"}