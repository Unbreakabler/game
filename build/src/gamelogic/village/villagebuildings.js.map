{"version":3,"file":"villagebuildings.js","sources":["../../../../../src/gamelogic/village/villagebuildings.ts"],"sourcesContent":["import { plainToClassFromExist, TransformFnParams } from \"class-transformer\";\nimport type { Requirement } from \"./achievable\";\nimport { FarmJob } from \"./farmjob\";\nimport { VillageBuilding } from \"./villagebuilding\";\n\nexport enum VILLAGE_BUILDING {\n  village = \"village\",\n  farm = \"farm\",\n  workshop = \"workshop\",\n  blacksmith = \"blacksmith\",\n  laboratory = \"laboratory\",\n}\n\nexport interface Upgrade {\n  requirement?: Requirement;\n  money_cost: number;\n  build_time: number;\n}\n\nconst pre = \"villagebuilding\";\nconst farm_name = `${pre}_${VILLAGE_BUILDING.farm}`;\nconst workshop_name = `${pre}_${VILLAGE_BUILDING.workshop}`;\nconst blacksmith_name = `${pre}_${VILLAGE_BUILDING.blacksmith}`;\nconst laboratory_name = `${pre}_${VILLAGE_BUILDING.laboratory}`;\n\nconst farm_upgrades: Upgrade[] = [\n  { build_time: 10, money_cost: 0 },\n  { build_time: 60, money_cost: 1_000, requirement: { achievable_name: farm_name, level_required: 1 } },\n  { build_time: 120, money_cost: 10_000, requirement: { achievable_name: farm_name, level_required: 2 } },\n];\n\nconst workshop_upgrades: Upgrade[] = [\n  { build_time: 120, money_cost: 10_000, requirement: { achievable_name: farm_name, level_required: 2 } },\n];\n\nconst blacksmith_upgrades: Upgrade[] = [\n  { build_time: 120, money_cost: 100_000, requirement: { achievable_name: workshop_name, level_required: 2 } },\n];\n\nconst laboratory_upgrades: Upgrade[] = [\n  { build_time: 600, money_cost: 1_000_000, requirement: { achievable_name: workshop_name, level_required: 2 } },\n];\n\nconst arr: VillageBuilding[] = [\n  new VillageBuilding(VILLAGE_BUILDING.farm, farm_upgrades, \"Farm\", \"Work here to make some money.\"),\n  new VillageBuilding(VILLAGE_BUILDING.workshop, workshop_upgrades, \"Workshop\", \"Construct towers.\"),\n  new VillageBuilding(VILLAGE_BUILDING.blacksmith, blacksmith_upgrades, \"Blacksmith\", \"Craft tower items and equipment\"),\n  new VillageBuilding(VILLAGE_BUILDING.laboratory, laboratory_upgrades, \"Laboratory\", \"Empower creeps for bonus rewards\"),\n];\n\nexport const default_village_buildings: Map<string, VillageBuilding> = arr.reduce(function (map, obj) {\n  map.set(obj.getAchievableName(), obj);\n  return map;\n}, new Map());\n\nexport function villageBuildingTransformer(param: TransformFnParams): Map<string, VillageBuilding> {\n  const map = new Map(Object.entries(param.obj.village_buildings));\n  for (const [name, village_building] of map.entries()) {\n    const default_village_buiding = default_village_buildings.get(name);\n    if (!default_village_buiding) throw new Error(`Corrupt Save. Village Building ${name} is invalid.`);\n    map.set(name, plainToClassFromExist(default_village_buiding, village_building));\n  }\n  return map as Map<string, VillageBuilding>;\n}\n"],"names":[],"mappings":"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"}