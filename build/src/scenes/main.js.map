{"version":3,"file":"main.js","sources":["../../../../src/scenes/main.ts"],"sourcesContent":["import \"phaser\";\nimport { gameModel, updateGameModel } from \"../gamelogic/gamemodel\";\nimport { calculateOfflineProgress, svelte_game_loop } from \"../gamelogic/gameloop\";\nimport { loadFromStorage } from \"../gamelogic/util/saveloadfunctions\";\n\nexport default class Main extends Phaser.Scene {\n  public constructor() {\n    super({ key: 'main', active: true });\n  }\n\n  public create(): void {\n    const scoreboard: Phaser.GameObjects.Text = this.add.text(10, 10, \"\", {\n      font: \"64px Courier\",\n      backgroundColor: \"#00ff00\",\n    });\n\n    const model = loadFromStorage();\n    gameModel.set(model);\n    calculateOfflineProgress();\n\n    // const unsubscribe_store = gameModel.subscribe((model) => {\n    //   scoreboard.setText([\"Money: \" + model.wallet.money]);\n    // });\n    // this.events.on(\"destroy\", function () {\n    //   unsubscribe_store();\n    // });\n\n    // GAME LOOP INTEGRATION TO SVELTE\n    this.game.events.on(\"step\", function (time: number, delta_t: number) {\n      svelte_game_loop(time, delta_t);\n    });\n  }\n}\n"],"names":[],"mappings":";;;;;MAKqB,IAAK,SAAQ,MAAM,CAAC,KAAK;IAC5C;QACE,KAAK,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;KACtC;IAEM,MAAM;QACiC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;YACpE,IAAI,EAAE,cAAc;YACpB,eAAe,EAAE,SAAS;SAC3B,EAAE;QAEH,MAAM,KAAK,GAAG,eAAe,EAAE,CAAC;QAChC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrB,wBAAwB,EAAE,CAAC;;;;;;;;QAU3B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,IAAY,EAAE,OAAe;YACjE,gBAAgB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SACjC,CAAC,CAAC;KACJ;;;;;"}