{"version":3,"file":"menu.svelte.js","sources":["../../../../src/components/menu.svelte"],"sourcesContent":["<script lang='ts'>\n  import Button from \"smelte/src/components/Button\";\n  import Mines from \"../app/mines.svelte\";\n  import Modal from './modal.svelte'\n  import { GameModel, gameModel } from \"../gamelogic/gamemodel\";\n  import { resetSaveGame, saveToStorage } from \"../gamelogic/util/saveloadfunctions\";\n\n  let gameModelInstance: GameModel;\n  gameModel.subscribe((m) => (gameModelInstance = m));\n\n  const updateTimestep = (delta: number) => {\n    gameModelInstance.tower_defense.time_multiplier += delta\n    gameModelInstance.tower_defense.time_multiplier = Math.min(Math.max(gameModelInstance.tower_defense.time_multiplier, 0), 100);\n  }\n\n  let showModal: null | string = null;\n\n  const saveGame = (): void => {\n    saveToStorage(gameModelInstance);\n  }\n\n  const hardReset = (): void => {\n    if (window.confirm(\"You will lose all progress. Are you sure?\")) {\n      resetSaveGame();\n      saveGame();\n    }\n  }\n\n</script>\n\n<div class=\"menu\">\n  <div class=\"actions\">\n    <Button on:click={() => showModal = 'mine'}>MINE</Button>\n    <Button on:click={() => showModal = 'inventory'}>INVENTORY</Button>\n    <Button>DPS METER</Button>\n    <Button color=\"secondary\" on:click={() => showModal = 'settings'}>SETTINGS</Button>\n  </div>\n  <div class=\"time-controls\">\n    <Button on:click={() => updateTimestep(-1)} >dec</Button>\n    <div>{gameModelInstance.tower_defense.time_multiplier}x</div>\n    <Button on:click={() => updateTimestep(1)}>inc</Button>\n  </div>\n</div>\n{#if showModal}\n  <Modal on:close={() => showModal = null}>\n    {#if showModal === 'mine'}\n      <Mines />\n    {:else if showModal === 'inventory'}\n      INVENTORY OR SOMETHING\n      <!-- <Inventory /> -->\n    {:else if showModal === 'settings'}\n      <div class=\"settings\">\n        <h4>Settings:</h4>\n        <Button color=\"secondary\" on:click={saveGame}>Save</Button>\n        <Button color=\"secondary\" on:click={hardReset}>Hard Reset</Button>\n      </div>\n    {/if}\n  </Modal>\n{/if}\n\n<style lang='scss'>\n  .menu {\n    flex: 1;\n    padding: 2px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n  .actions {\n    display:flex;\n    flex-direction: column;\n  }\n  .time-controls {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .settings {\n    display: flex;\n    flex-direction: column;\n  }\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAqD4C,GAAQ;;;;;;;;;;oCACR,GAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAT5C,GAAS,QAAK,MAAM;oBAEf,GAAS,QAAK,WAAW;oBAGzB,GAAS,QAAK,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAX5B,GAAiB,IAAC,aAAa,CAAC,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAIpD,GAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uGAJJ,GAAiB,IAAC,aAAa,CAAC,eAAe;;;;;;;;;qBAIpD,GAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KApCR,iBAA4B;CAChC,SAAS,CAAC,SAAS,CAAE,CAAC,oBAAM,iBAAiB,GAAG,CAAC;;OAE3C,cAAc,GAAI,KAAa;kBACnC,iBAAiB,CAAC,aAAa,CAAC,eAAe,IAAI,KAAK;kBACxD,iBAAiB,CAAC,aAAa,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC,GAAG,GAAG;;;KAG1H,SAAS,GAAkB,IAAI;;OAE7B,QAAQ;EACZ,aAAa,CAAC,iBAAiB;;;OAG3B,SAAS;MACT,MAAM,CAAC,OAAO,CAAC,2CAA2C;GAC5D,aAAa;GACb,QAAQ;;;;6CAQc,SAAS,GAAG,MAAM;+CAClB,SAAS,GAAG,WAAW;+CAEL,SAAS,GAAG,UAAU;+BAGxC,cAAc,EAAE,CAAC;+BAEjB,cAAc,CAAC,CAAC;6CAInB,SAAS,GAAG,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;"}