{"version":3,"file":"main.js","sources":["../../../../src/scenes/main.ts"],"sourcesContent":["import \"phaser\";\nimport { gameModel, updateGameModel } from \"../gamelogic/gamemodel\";\nimport { calculateOfflineProgress, svelte_game_loop } from \"../gamelogic/gameloop\";\nimport { loadFromStorage } from \"../gamelogic/util/saveloadfunctions\";\n\nexport default class Main extends Phaser.Scene {\n  public constructor() {\n    super(\"main\");\n  }\n\n  public create(): void {\n    const scoreboard: Phaser.GameObjects.Text = this.add.text(10, 10, \"\", {\n      font: \"64px Courier\",\n      backgroundColor: \"#00ff00\",\n    });\n\n    const model = loadFromStorage();\n    gameModel.set(model);\n    calculateOfflineProgress();\n    updateGameModel();\n\n    const unsubscribe_store = gameModel.subscribe((model) => {\n      scoreboard.setText([\"Money: \" + model.wallet.money]);\n    });\n    this.events.on(\"destroy\", function () {\n      unsubscribe_store();\n    });\n\n    // GAME LOOP INTEGRATION TO SVELTE\n    this.game.events.on(\"step\", function (time: number, delta_t: number) {\n      svelte_game_loop(time, delta_t);\n    });\n  }\n}\n"],"names":[],"mappings":";;;;;MAKqB,IAAK,SAAQ,MAAM,CAAC,KAAK;IAC5C;QACE,KAAK,CAAC,MAAM,CAAC,CAAC;KACf;IAEM,MAAM;QACX,MAAM,UAAU,GAA4B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;YACpE,IAAI,EAAE,cAAc;YACpB,eAAe,EAAE,SAAS;SAC3B,CAAC,CAAC;QAEH,MAAM,KAAK,GAAG,eAAe,EAAE,CAAC;QAChC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrB,wBAAwB,EAAE,CAAC;QAC3B,eAAe,EAAE,CAAC;QAElB,MAAM,iBAAiB,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC,KAAK;YAClD,UAAU,CAAC,OAAO,CAAC,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;SACtD,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE;YACxB,iBAAiB,EAAE,CAAC;SACrB,CAAC,CAAC;;QAGH,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,IAAY,EAAE,OAAe;YACjE,gBAAgB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SACjC,CAAC,CAAC;KACJ;;;;;"}